{% extends 'base.html.twig' %}

{% block title %}Modifier une candidature{% endblock %}

{% block body %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 rounded-md shadow
            {{ app.session.get('dark_mode') ? 'bg-gray-800' : 'bg-white' }}">
  <h1 class="text-2xl font-bold leading-7 mb-6 
             {{ app.session.get('dark_mode') ? 'text-white' : 'text-gray-900' }}">
    Modifier une candidature
  </h1>

  {{ form_start(form) }}

  <div class="space-y-12">
    <div class="pb-4 
                {{ app.session.get('dark_mode') ? 'border-gray-700' : 'border-gray-200' }}">
      <h2 class="text-base font-semibold leading-7 
                 {{ app.session.get('dark_mode') ? 'text-white' : 'text-gray-900' }}">
        Informations de la candidature
      </h2>
      <p class="mt-1 text-sm leading-6 
                {{ app.session.get('dark_mode') ? 'text-gray-400' : 'text-gray-600' }}">
        Mettez à jour les champs nécessaires pour cette candidature.
      </p>

      <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
        {# --- JOB TITLE --- #}
        <div class="sm:col-span-4">
          {{ form_label(form.job_title, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.job_title, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "Intitulé du poste"
              }
            }) }}
          </div>
        </div>

        {# --- SENT DATE --- #}
        <div class="sm:col-span-3">
          {{ form_label(form.sent, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.sent, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "Date d'envoi"
              }
            }) }}
          </div>
        </div>

        {# --- RESPONSE DATE --- #}
        <div class="sm:col-span-3">
          {{ form_label(form.response, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.response, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "Réponse reçue ?"
              }
            }) }}
          </div>
        </div>

        {# --- LINK --- #}
        <div class="sm:col-span-6">
          {{ form_label(form.link, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.link, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "URL de l'annonce"
              }
            }) }}
          </div>
        </div>

        {# --- COMPANY --- #}
        <div class="sm:col-span-3">
          {{ form_label(form.company, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.company, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "Entreprise"
              }
            }) }}
          </div>
        </div>

        {# --- JOBBOARD --- #}
        <div class="sm:col-span-3">
          {{ form_label(form.jobboard, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.jobboard, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "LinkedIn, France Travail, etc."
              }
            }) }}
          </div>
        </div>

        {# --- CONTACT --- #}
        <div class="sm:col-span-3">
          {{ form_label(form.contact, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.contact, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "Nom du contact"
              }
            }) }}
          </div>
        </div>

        {# --- STATUT --- #}
        <div class="sm:col-span-3">
          {{ form_label(form.statut, null, {
            label_attr: {
              class: app.session.get('dark_mode') ? 'block text-sm font-medium text-gray-300' : 'block text-sm font-medium text-gray-700'
            }
          }) }}
          <div class="mt-2">
            {{ form_widget(form.statut, {
              attr: {
                class: (app.session.get('dark_mode') 
                  ? 'bg-gray-700 text-white border-gray-600 placeholder-gray-400' 
                  : 'border-gray-300 placeholder-gray-400') ~ 
                ' block w-full rounded-md p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm placeholder:italic',
                placeholder: "En cours / Acceptée / Refusée"
              }
            }) }}
          </div>
        </div>

        {# --- NOTE --- #}
        <div class="sm:col-span-6">
          {{ form_row(form.note) }}
        </div>
      </div>
    </div>
  </div>

  <div class="mt-6 flex items-center justify-end gap-x-6">
    <a href="{{ path('app_application_index') }}"
       class="text-sm font-semibold hover:underline 
              {{ app.session.get('dark_mode') ? 'text-gray-300' : 'text-gray-900' }}">
      Annuler
    </a>
    <button type="submit"
            class="rounded-md px-4 py-2 text-sm font-semibold shadow-sm 
                   {{ app.session.get('dark_mode') 
                       ? 'bg-indigo-600 hover:bg-indigo-500 text-white' 
                       : 'bg-indigo-600 hover:bg-indigo-500 text-white' }}">
      {{ button_label|default('Enregistrer') }}
    </button>
  </div>

  {{ form_end(form) }}
</div>
{% endblock %}
