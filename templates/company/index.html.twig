{% extends 'base.html.twig' %}

{% block title %}Mes entreprises{% endblock %}

{% block body %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl font-bold text-gray-800">Mes Entreprises</h1>
        <a href="{{ path('app_company_new') }}"
           class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded shadow">
            <i class="material-icons mr-2 text-base">add</i> Ajouter une entreprise
        </a>
    </div>

    <div class="overflow-x-auto bg-white shadow-md rounded">
        <table class="min-w-full divide-y divide-gray-200 text-sm text-left">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-4 py-3 text-center font-medium text-gray-600">N°</th>
                    <th class="px-4 py-3 font-medium text-gray-600">Nom</th>
                    <th class="px-4 py-3 font-medium text-gray-600">Activité</th>
                    <th class="px-4 py-3 font-medium text-gray-600">Adresse</th>
                    <th class="px-4 py-3 font-medium text-gray-600">Code postal</th>
                    <th class="px-4 py-3 font-medium text-gray-600">Ville</th>
                    <th class="px-4 py-3 text-right font-medium text-gray-600">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
                {% for company in companies %}
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-2 text-center text-gray-800">{{ company.id }}</td>
                        <td class="px-4 py-2 text-gray-800">{{ company.name }}</td>
                        <td class="px-4 py-2 text-gray-800">{{ company.activity }}</td>
                        <td class="px-4 py-2 text-gray-800">{{ company.address }}</td>
                        <td class="px-4 py-2 text-gray-800">{{ company.postalCode }}</td>
                        <td class="px-4 py-2 text-gray-800">{{ company.city }}</td>
                        <td class="px-4 py-2 text-right">
                            <div class="flex justify-end space-x-2">
                                <a href="{{ path('app_company_show', {'id': company.id}) }}"
                                   class="inline-flex items-center px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs shadow">
                                    <i class="material-icons text-sm">person</i>
                                </a>
                                <a href="{{ path('app_company_edit', {'id': company.id}) }}"
                                   class="inline-flex items-center px-2 py-1 bg-green-500 hover:bg-green-600 text-white rounded text-xs shadow">
                                    <i class="material-icons text-sm">edit</i>
                                </a>
                                <form method="post"
                                      action="{{ path('app_company_delete', {'id': company.id}) }}"
                                      onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet élément ?');"
                                      class="inline">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ company.id) }}">
                                    <button type="submit"
                                            class="inline-flex items-center px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs shadow">
                                        <i class="material-icons text-sm">close</i>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="7" class="px-4 py-4 text-gray-500 italic flex items-center gap-2">
                            <i class="material-icons rotate-90">subdirectory_arrow_right</i>
                            Aucune entreprise enregistrée.
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}
