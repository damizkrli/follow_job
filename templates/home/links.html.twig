<div class="relative mt-4 sm:mt-0 flex justify-center items-center gap-4">

  <div class="relative inline-block w-max" id="dropdownWrapper">
    <button
      id="dropdownButton"
      type="button"
      onclick="document.getElementById('dropdownMenu').classList.toggle('hidden')"
      class="inline-flex items-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring"
    >
      Réseaux & Liens
      <svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.584l3.71-4.354a.75.75 0 111.14.976l-4.25 5a.75.75 0 01-1.14 0l-4.25-5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
      </svg>
    </button>

    <div
      id="dropdownMenu"
      class="hidden absolute mt-2 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50"
      role="menu">
      {% for link in external_links %}
        <div class="flex justify-between items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
          <a href="{{ link.url }}" target="_blank" class="flex-1 truncate">{{ link.name }}</a>
          <button
            type="button"
            onclick="copyToClipboard('{{ link.url }}')"
            class="ml-2 p-1 text-gray-600 hover:text-gray-800"
            title="Copier le lien"
          >
            <span class="material-symbols-outlined text-xl">content_copy</span>
          </button>
        </div>
      {% endfor %}

      <div
        id="toast"
        class="fixed bottom-5 right-5 hidden bg-green-600 text-white px-4 py-2 rounded shadow-lg text-sm transition-opacity duration-300 opacity-0">
        Copié dans le presse-papier !
      </div>

      <hr class="my-1 border-t">
        <a href="{{ path('external_link_manage') }}" class="block px-4 py-2 text-sm text-blue-600 hover:bg-gray-100 font-semibold">
          Modifier 
        </a>
    </div>
  </div>

  <button
    type="button"
    onclick="document.getElementById('modalForm').classList.remove('hidden')"
    class="p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring relative group"
    aria-label="Ajouter un lien"
  >
    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    <span class="absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity">
      Ajouter un lien
    </span>
  </button>
</div>

{% include "tools/modalExternalLink.html.twig" %}
